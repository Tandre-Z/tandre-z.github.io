<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover">
    <title>Tandre的游戏笔记</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta charset="utf-8">
    <link rel="icon" type="image/png" href="img/icon.png" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/swiper-bundle.min.css">
    <script>
        // 检测系统主题并设置初始主题
        const storedTheme = localStorage.getItem('isDark');
        if (storedTheme === null) {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            localStorage.setItem('isDark', prefersDark);
        }
        const isDark = storedTheme === 'true';
        document.documentElement.classList.add('js-loaded');
        if (isDark) {
            document.documentElement.style.setProperty('--color-bg', '#1f1f1f');
            document.documentElement.style.setProperty('--color-text', '#ffffff');
            document.documentElement.classList.add('dark');
        }
        else {
            document.documentElement.style.setProperty('--color-bg', '#e6e1d8');
            document.documentElement.style.setProperty('--color-text', '#333333');
            document.documentElement.classList.remove('dark');
        }
    </script>
</head>
<style>
</style>

<body>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- <script src="js/swiper-bundle.min.js"></script> -->
    <header>
        <img id="header-logo" src="img/logo.png">
        <button id="theme-toggle">日/夜</button>
    </header>

    <blockquote>
        <p style="font-size: 14px;">
            <em>"在信息时代，客观障碍已不复存在，"他说："所谓障碍都是主观上的。如果你想动手开发什么全新的技术，你不需要几百万美元的资金，你只需要在冰箱里放满比萨和可乐，再有一台便宜的计算机，和为之献身的决心。我们在地板上睡过，我们从河水中趟过。"</em>
        </p>
        <p style="font-size: 12px;">——[美] 大卫·卡什诺《DOOM启示录》</p>
    </blockquote>
    <p>
        <a href='about.html' class="about-link">
            <strong>关于我 About</strong>
        </a>
    <div class="intro-text">
        我是<strong>Tandre</strong>，一个有点理想主义，时而内卷时而躺平的<strong>游戏开发爱好者</strong>，目前在一家上市公司做虚拟仿真、数字孪生相关的unity开发工作。通过该博客记录个人关于<strong>游戏创作</strong>、<strong>技术成长</strong>及对<strong>生活的思考</strong>。
    </div>
    </p>

    </div>
    <h2>博客 Blog</h2>
    <div id="post-content" class="content"></div>
    <h2>项目 Project</h2>
    <div id="game-content" class="content"></div>

    <h2>联系 Contact</h2>
    <div class="contact-section">
        <div class="contact-links">
            <p>我的博客：<a href="https://tandrez.notion.site/Tandre-s-Blog-c377d7e1d63342408b0ed036e181a266">Tandre's
                    Blog</a></p>
            <p>Github: <a href="https://github.com/Tandre-Z">Tandre-Z</a></p>
            <p>CSDN：<a href="https://blog.csdn.net/weixin_46050495?spm=1010.2135.3001.5343">Tandre_Z</a></p>
            <p>公众号：Tandre的游戏笔记</p>
        </div>
        <img src="./images/tandrewechat.jpg" class="small">
    </div>

    <br>
    <br>
    <br>
    <p>更新于2024/12/27</p>
    <p>TandreZ</p>
    <p>&nbsp;</p>

    <div id="beian">
        <div style="text-align: center;">
            <!-- 备案号：<a href="https://beian.miit.gov.cn/" target="_blank">苏ICP备18036754号-1</a> -->
            @Tandre 版权所有 转载请注明出处
        </div>
    </div>

    <script>
        $(document).ready(function () {
            // 添加js-loaded类，启用过渡效果
            document.documentElement.classList.add('js-loaded');

            // 从 localStorage 获取主题状态
            var isDark = localStorage.getItem('isDark') === 'true';

            $.getJSON('Data/posts.json', function (postGroups) {
                var postgroupParent = $('<div>').addClass('post-parent');

                $.each(postGroups, function (i, postGroup) {
                    var postGroupElement = $('<div>').addClass('post-group');
                    var groupNameElement = $('<h3>').text(postGroup.groupName);

                    // 添加展开按钮
                    var expandButton = $('<button>')
                        .addClass('expand-button')
                        .html('<svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>');

                    postGroupElement.append(groupNameElement, expandButton);

                    // 只显示前三条
                    $.each(postGroup.posts.slice(0, 3), function (j, post) {
                        var postElement = $('<p>').addClass('post');
                        var linkElement = $('<a>').attr('href', post.link).text(post.title);
                        var timeElement = $('<span>').addClass('time').text(post.date);
                        postElement.append(linkElement, timeElement);
                        postGroupElement.append(postElement);
                    });

                    // 创建模态窗口
                    var modalHtml = `
                        <div class="modal">
                            <div class="modal-content">
                                <span class="close-modal">&times;</span>
                                <h2>${postGroup.groupName}</h2>
                                <div class="modal-posts"></div>
                            </div>
                        </div>
                    `;
                    $('body').append(modalHtml);

                    var modal = $('.modal').last();
                    var modalPosts = modal.find('.modal-posts');

                    // 添加所有文章到模态窗口
                    $.each(postGroup.posts, function (j, post) {
                        var postElement = $('<p>').addClass('post');
                        var linkElement = $('<a>').attr('href', post.link).text(post.title);
                        var timeElement = $('<span>').addClass('time').text(post.date);
                        postElement.append(linkElement, timeElement);
                        modalPosts.append(postElement);
                    });

                    // 只有点击展开按钮时才显示模态窗口
                    expandButton.click(function (e) {
                        e.stopPropagation(); // 阻止事件冒泡
                        modal.fadeIn(300);
                        $('body').css('overflow', 'hidden');
                    });

                    // 点击关闭按钮关闭模态窗口
                    modal.find('.close-modal').click(function () {
                        modal.fadeOut(300);
                        $('body').css('overflow', '');
                    });

                    // 点击模态窗口外部区域关闭
                    modal.click(function (e) {
                        if ($(e.target).is('.modal')) {
                            modal.fadeOut(300);
                            $('body').css('overflow', '');
                        }
                    });

                    postgroupParent.append(postGroupElement);
                });

                $('#post-content').append(postgroupParent).show();
            });

            $.getJSON('Data/games.json', function (games) {
                var gameParent = $('<div>').addClass('game-parent');
                $.each(games, function (i, game) {
                    var gameElement = $('<div>').addClass('game');
                    var gameHeaderElement = $('<div>').addClass('game-header');
                    var nameElement = $('<a>').attr('href', game.link).text(game.name);
                    var descElement = $('<p>').html(game.desc + '<br>' + game.type).attr('style', 'margin:0px 0px;');
                    var timeElement = $('<span>').text(game.date);
                    gameHeaderElement.append(nameElement, timeElement);
                    gameElement.append(gameHeaderElement, descElement);
                    gameParent.append(gameElement);
                });
                $('#game-content').append(gameParent).show();
            });

            function SetTheme() {
                $('html,body').toggleClass('dark', isDark);
                var logo = $('#header-logo');
                logo.attr('src', isDark ? 'img/logo-dark.png' : 'img/logo.png');
                // 使用更柔和的深色模式颜色
                document.documentElement.style.setProperty('--color-bg', isDark ? '#1f1f1f' : '#e6e1d8');
                document.documentElement.style.setProperty('--color-text', isDark ? '#e0e0e0' : '#333333');
                document.documentElement.style.setProperty('--color-secondary', isDark ? '#a0a0a0' : '#666666');
                // 移除初始主题类
                $('html').removeClass('initial-theme');
            }
            // 页面加载时应用主题
            SetTheme();
            $('#theme-toggle').click(function () {
                isDark = !isDark;
                SetTheme();
                localStorage.setItem('isDark', isDark);
            });
        });
    </script>
</body>

</html>